syntax = "proto3";

option java_multiple_files = true;
option java_package = "org.loopring.orderbook.proto";
package org.loopring.orderbook.proto;


message Order {
    int64 id = 1;
    RawOrder raw_order = 2;
    int64 updated_block = 3;
    string dealtAmountS = 4;
    string dealtAmountB = 5;
    string splitAmountS = 6;
    string splitAmountB = 7;
    string cancelledAmountS = 8;
    string cancelledAmountB = 9;
    OrderStatus status = 10;
    int32 broadcast_time = 11;
    double price = 12;
    int64 pow_nonce = 13;
    string market = 14;
    string side = 15;
    OrderType orderType = 16;
    int64 createdAt = 17;
    int64 updatedAt = 18;
}

// level 1 status
enum OrderLevel1Status {
    ORDER_STATUS_LEVEL1_UNKNOWN = 0;
    ORDER_STATUS_NEW = 1;
    ORDER_STATUS_FULL = 2;
    ORDER_STATUS_SOFT_CANCELLED = 3;
    ORDER_STATUS_HARD_CANCELLED = 4;
    ORDER_STATUS_EXPIRED = 5;
}

// level 2 status
enum OrderLevel2Status {
    ORDER_STATUS_LEVEL2_UNKNOWN = 0;
    ORDER_STATUS_OPEN = 1;
    ORDER_STATUS_PENDING = 2;
    ORDER_STATUS_PARTIAL = 3;
}

// level 3 status
enum OrderLevel3Status {
    ORDER_STATUS_LEVEL3_UNKNOWN = 0;
    ORDER_STATUS_DEFERRED = 1;
    ORDER_STATUS_TINY = 2;
    ORDER_STATUS_MATCHING = 3;
    ORDER_STATUS_SETTLEING = 4;
    ORDER_STATUS_ACTIVE = 5;
}

message OrderStatus {
    OrderLevel1Status level1_status = 1;
    OrderLevel2Status level2_status = 2;
    OrderLevel3Status level3_status = 3;
}

enum OrderType {
    UNKNOWN = 0;
    MARKET = 1;
    P2P = 2;
}

enum MarketSide {
    BUY = 0;
    SELL = 1;
}

enum SoftCancelType {
    BY_ORDER_HASH = 0;
    BY_OWNER = 1;
    BY_TIME = 2; // like cutoff
    BY_MARKET = 3;
}

message RawOrder {
    string protocol = 1;
    string delegate_address = 2;
    string token_s = 3;
    string token_b = 4;
    string amount_s = 5;
    string amount_b = 6;
    int64 valid_since = 7;
    int64 valid_until = 8;
    string lrc_fee = 9;
    bool buy_no_more_than_amount_b = 10;
    int32 margin_split_percentage = 11;
    string owner = 12;
    string wallet_address = 13;
    string auth_addr = 14;
    string auth_private_key = 15;
    int32 v = 16;
    string r = 17;
    string s = 18;
    string hash = 19;
}

message Order {
   RawOrder raw_order = 1;
   string dealt_amount_s = 2;
   string dealt_amount_b = 3;
   int32 delayed = 4;
   string delay_cause = 5;
}